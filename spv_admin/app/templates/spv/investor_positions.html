{% extends "app/base.html" %}

{% block content %}
<h2>{{ investor.name }}'s Positions</h2>

<div class="mb-3">
  <p><strong>Email:</strong> {{ investor.email }}</p>
  <p><strong>Wallet:</strong> {{ investor.wallet_address }}</p>
</div>

<h4>Positions</h4>

<table class="table table-sm table-bordered">
  <thead class="table-light">
    <tr>
      <th>Loan Title</th>
      <th>Slices Owned</th>
      <th>Principal ($)</th>
      <th>Accrued Yield ($)</th>
      <th>Maturity Date</th>
    </tr>
  </thead>
  <tbody>
    {% for pos in positions %}
    <tr>
      <td>{{ pos.loan.title }}</td>
      <td>{{ pos.slices_owned }}</td>
      <td>{{ pos.loan.principal|floatformat:2 }}</td>
      <td>{{ pos.accrued_yield|floatformat:2 }}</td>
      <td>{{ pos.loan.maturity_date }}</td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="5" class="text-center">No positions found for this investor.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<hr>

<h4>Total Accrued Yield: ${{ total_yield|floatformat:2 }}</h4>

{% endblock %}
